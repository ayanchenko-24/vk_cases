(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1323],{22268:function(e,t,n){"use strict";n.d(t,{y:function(){return a}});let a="portal/notifications"},20204:function(e,t,n){"use strict";n.d(t,{Recommendation:function(){return k}});var a=n(57437),i=n(2265),r=n(33145),l=n(42586),c=n(43847),o=n(17629),s=n(59456),u=n(68082),d=n(2436),m=n(85303),_=n(64602),h=n(90072),f=n(54867),p=n(22222);async function v(e){let{isClientSideRequest:t=!1,locale:n}=e,{data:a}=await (0,p.Io)("/recommendation",{filters:{"populate[0]":"articles.cover","populate[1]":"articles.tags","populate[2]":"tags.icon"},isClientSideRequest:t,locale:n,isCacheEnabled:!0});return a}var g=n(39882),N=n(60016),x=n.n(N);let k=(0,i.memo)(function(e){var t,n;let{withTitle:p=!1,withTags:N=!1,withArticles:k=!1,withArticleTags:C=!1,withArticleDate:y=!1,onClick:b=()=>{}}=e,j=(0,l.useTranslations)("search"),E=(0,g.D)(),{data:S,isLoading:w}=(0,c.ZP)("/recommendation",()=>v({locale:E,isClientSideRequest:!0}),{revalidateOnFocus:!1,revalidateIfStale:!1}),T=(0,i.useMemo)(()=>{var e;return(null==S?void 0:null===(e=S.articles)||void 0===e?void 0:e.length)?S.articles.filter(e=>{let{pathname:t}=e;return!!t}):[]},[null==S?void 0:S.articles]),I=(0,i.useCallback)(e=>{(0,_.sQ)(e),b()},[b]);return w?(0,a.jsx)(o.$j,{}):(null==S?void 0:null===(t=S.tags)||void 0===t?void 0:t.length)||T.length?(0,a.jsxs)("div",{className:x().wrapper,children:[N&&!!(null==S?void 0:null===(n=S.tags)||void 0===n?void 0:n.length)&&(0,a.jsx)("div",{className:x().tags,children:null==S?void 0:S.tags.map(e=>{let{id:t,name:n,title:i,icon:l}=e;return(0,a.jsxs)(h.rU,{className:x().tag,onClick:()=>I(_.zW.clickSearchRecommendationTag),href:"/tags/".concat(n),children:[!!l&&(0,a.jsx)(r.default,{loader:f.t,src:l.url,width:20,height:20,alt:l.name||"icon"}),i]},t)})}),k&&!!T.length&&(0,a.jsxs)("div",{className:x().recommendation,children:[p&&(0,a.jsx)("div",{className:x().title,children:j("recommendations")}),(0,a.jsx)("div",{className:x().list,children:T.map(e=>{let{title:t,cover:n,pathname:i,id:l,tags:c,created:o}=e;return(0,a.jsxs)("div",{className:x().article,children:[!!(null==n?void 0:n.url)&&(0,a.jsx)(h.rU,{onClick:()=>I(_.zW.clickSearchRecommendationArticle),className:x().image,href:i,children:(0,a.jsx)(r.default,{className:x().articleImage,loader:f.t,fill:!0,style:{objectFit:"cover"},src:n.url,alt:n.name||"image"})}),C&&!!(null==c?void 0:c.length)&&(0,a.jsx)("div",{className:x().articleTags,children:c.map(e=>{let{id:t,title:n,name:i}=e;return(0,a.jsx)(h.rU,{className:x().articleTag,href:"/tags/".concat(i),children:n},t)})}),(0,a.jsx)(h.rU,{className:x().articleTitle,href:i,onClick:()=>I(_.zW.clickSearchRecommendationArticle),children:t}),y&&o&&(0,a.jsx)("div",{className:x().date,children:(0,s.Z)((0,u.Z)(o),d.N6,{locale:m.mS[E].locale})})]},l)})})]})]}):null})},51323:function(e,t,n){"use strict";n.d(t,{o:function(){return j}});var a=n(57437),i=n(2265),r=n(84772),l=n.n(r),c=n(43847),o=n(64602),s=n(48542),u=n(39882),d=n(93264),m=n(42586),_=n(17629),h=n(31658),f=n.n(h);let p=(0,i.memo)(function(e){let{value:t,type:n,onPressEnter:i,onChange:r,setFocused:c,withoutPlaceholder:o=!1,focused:u,isLoading:d}=e,h=(0,m.useTranslations)("search");return(0,a.jsxs)("div",{className:l()(f().wrapper,{[f().active]:!!t,[f().focused]:u,[f().primary]:n===s.NK.primary,[f().header]:n===s.NK.header}),children:[(0,a.jsxs)("label",{className:f().text,children:[(0,a.jsx)("span",{className:f().icon}),(0,a.jsx)("input",{className:l()(f().input,{[f().withoutPlaceholder]:o}),type:"search",value:t,maxLength:255,onKeyUp:i,onFocus:()=>c(!0),onChange:e=>r(e.target.value),placeholder:h("search")})]}),!!t&&!d&&(0,a.jsxs)("div",{className:f().btn,onClick:()=>{r("")},children:[(0,a.jsx)("span",{className:f().iconCancelForDevices}),(0,a.jsx)("span",{className:f().iconCancel})]}),d&&(0,a.jsx)("div",{children:(0,a.jsx)(_.$j,{size:"small"})})]})});var v=n(20204),g=n(48008),N=n.n(g);let x=(0,i.memo)(function(e){let{value:t,id:n,active:i}=e;return(0,a.jsx)("div",{className:l()(N().option,{[N().active]:i}),"data-id":n,children:t})});function k(e){if(e.target instanceof Element){let t=e.target.closest("[data-id]");if(t instanceof HTMLElement)return t.dataset.id}return null}let C=(0,i.memo)(function(e){let{options:t,type:n,value:r,currentSuggestIndex:c,onClick:o,onHover:u,setFocused:d,onClose:_}=e,h=(0,m.useTranslations)("search"),f=(0,i.useCallback)(e=>{let t=k(e);t&&u(Number(t))},[u]),p=(0,i.useCallback)(e=>{k(e)&&o()},[o]),g=(0,i.useCallback)(()=>{d(!1),_()},[d,_]);return Array.isArray(t)||r?Array.isArray(t)?(0,a.jsxs)("div",{className:l()(N().wrapper,{[N().mobileStatic]:n===s.NK.header}),onMouseOver:f,onClick:p,children:[t.map((e,t)=>(0,a.jsx)(x,{id:t,value:e,active:c===t},e)),0===t.length&&h("default")]}):null:(0,a.jsx)("div",{className:l()(N().wrapper,{[N().mobileStatic]:n===s.NK.header}),children:(0,a.jsx)(v.Recommendation,{withTitle:!0,withArticles:!0,withTags:!0,onClick:g})})});var y=n(65521),b=n.n(y);let j=(0,i.memo)(function(e){let{type:t,defaultValue:n,onSearch:r,onClose:m}=e,[_,h]=(0,i.useState)(!1),[f,v]=(0,i.useState)(n),[g,N]=(0,i.useState)(null),x=(0,i.useRef)(null),k=(0,i.useRef)(null),y=(0,u.D)(),j=(0,u.Nr)(f,300),{data:E=null,isLoading:S}=(0,c.ZP)(()=>j!==n?j.toLowerCase():null,e=>(0,d.zI)({filters:{query:e,locale:y},locale:y,isClientSideRequest:!0}),{revalidateOnFocus:!1,keepPreviousData:!!f}),w=(0,i.useCallback)(e=>{var t,n;let a=e.target;(null===(t=x.current)||void 0===t?void 0:t.contains(a))||(N(null),h(!1)),(null===(n=k.current)||void 0===n?void 0:n.contains(a))||N(null)},[]),T=(0,i.useCallback)(()=>{null!=g&&(r(E[g]),v(E[g]),h(!1),(0,o.sQ)(o.zW.clickSearchSuggest))},[g,E,r]),I=(0,i.useCallback)(e=>{if("Enter"===e.key){if(h(!1),null!=g){r(E[g]),v(E[g]),(0,o.sQ)(o.zW.clickSearchSuggest);return}r(f),(0,o.sQ)(o.zW.clickSearchEnter);return}},[g,E,f,r]),A=(0,i.useCallback)(e=>{("ArrowDown"===e.key||"ArrowUp"===e.key)&&e.preventDefault();let t=null!=g?g:-1;"ArrowDown"===e.key&&(t+=1),"ArrowUp"===e.key&&(t-=1),(null==E?void 0:E.length)&&!(t<0)&&!(t>E.length-1)&&N(t)},[g,E]);return(0,i.useEffect)(()=>(x.current&&document.documentElement.addEventListener("click",w),()=>{document.documentElement.removeEventListener("click",w)}),[w,x]),(0,i.useEffect)(()=>{document.body.classList.toggle("active-search".concat(t===s.NK.header?"-".concat(s.NK.header):""),_)},[_,t]),(0,i.useEffect)(()=>{N(null)},[f]),(0,a.jsxs)("div",{className:l()(b().main,{[b().focused]:_},{[b().mobileVisible]:t===s.NK.header}),ref:x,onKeyUp:A,children:[(0,a.jsxs)("div",{className:b().header,children:[t===s.NK.header&&(0,a.jsx)("span",{className:b().arrowBack,onClick:()=>{m(),h(!1)}}),(0,a.jsx)(p,{type:t,value:f,focused:_,onChange:v,isLoading:S,setFocused:h,onPressEnter:I,withoutPlaceholder:t===s.NK.header&&!_})]}),(0,a.jsx)("div",{className:b().options,ref:k,children:(0,a.jsx)(C,{type:t,value:f,onClose:m,onClick:T,options:E,isLoading:S,setFocused:h,onHover:N,currentSuggestIndex:g})})]})})},2436:function(e,t,n){"use strict";n.d(t,{AU:function(){return a},N6:function(){return r},_V:function(){return i}});let a="dd MMMM yyyy",i="dd MMMM",r="dd.MM.yyyy"},39882:function(e,t,n){"use strict";n.d(t,{AN:function(){return _},D:function(){return m},Nr:function(){return d},Vj:function(){return u}});var a=n(2265),i=n(42586),r=n(59456),l=n(68082),c=n(53974),o=n(85303),s=n(22268);let u=(e,t,n)=>(0,a.useMemo)(()=>e?(0,r.Z)((0,l.Z)(e),t,{locale:o.mS[n].locale}):null,[e,n,t]),d=(e,t)=>{let[n,i]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let n=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(n)}},[e,t]),n},m=()=>{let e=(0,i.useLocale)();return Object.keys(o.mS).includes(e)?e:"ru"},_=(e,t)=>{let n=m(),[i,r]=(0,c._)(s.y);(0,a.useEffect)(()=>{if(!e.canRepeat&&!t&&!e.canRepeat){var a;let t=i||{},l={...null!==(a=t[n])&&void 0!==a?a:{},[e.id]:!0};r({...t,[n]:l})}},[e,n,i,r,t])}},90072:function(e,t,n){"use strict";n.d(t,{jD:function(){return r},rU:function(){return a},tv:function(){return l}});let{Link:a,redirect:i,usePathname:r,useRouter:l}=(0,n(53795).iV)({locales:["ru","en"]})},93264:function(e,t,n){"use strict";n.d(t,{y2:function(){return i},zI:function(){return r}});var a=n(22222);n(85303);let i=e=>{let{query:t,parent:n,start:i,limit:r,isClientSideRequest:l=!1,locale:c,host:o,requestId:s}=e,u={filters:{query:t,...i&&{start:String(i)},...r&&{limit:String(r)},...n&&{parent:n}},isClientSideRequest:l,locale:c,host:o,requestId:s,isCacheEnabled:!0};return(0,a.Io)("/search",u)},r=e=>{let{isClientSideRequest:t=!1,locale:n,host:i,filters:r}=e;return(0,a.Io)("/search/suggests",{filters:r,isClientSideRequest:t,locale:n,host:i,isCacheEnabled:!1})}},48542:function(e,t,n){"use strict";var a,i,r,l,c,o,s,u,d,m,_,h,f,p,v,g,N,x,k,C,y,b,j,E,S,w,T,I;n.d(t,{CD:function(){return h},EC:function(){return _},MB:function(){return a},Mh:function(){return o},NK:function(){return u},RK:function(){return c},Sc:function(){return d},bT:function(){return l},cw:function(){return A},e1:function(){return p},r4:function(){return f}}),(v=a||(a={})).light="light",v.dark="dark",(g=i||(i={})).large="large",g.small="small",g.medium="medium",g.thumbnail="thumbnail",(N=r||(r={})).CURRENT="current",N.PREVIOUS="previous",N.FUTURE="future",(x=l||(l={})).H2="headline2",x.H3="headline3",x.H4="headline4",x.H5="headline5",x.H6="headline6",x.PARAGRAPH="paragraph",x.NOTIFICATION="notification",x.IMAGE="image",x.SLIDER="slider",x.QUOTATION="quotation",x.CALL_TO_ACTION="CallToAction",x.LIST="list",x.VIDEO="video",x.FILE="file",x.TABS="tabs",x.SWIPER_SLIDER="swiperSlider",x.ACCORDION="accordion",x.FORM="form",x.CUSTOM_CONTENT="customContent";let A=new Set(["headline2","headline3","headline4","headline5","headline6"]);(k=c||(c={})).like="like",k.dislike="dislike",(C=o||(o={})).input="input",C.textarea="textarea",C.checkbox="checkbox",(y=s||(s={})).confirm="confirm",y.reject="reject",(b=u||(u={})).primary="primary",b.header="header",(j=d||(d={})).MOBILE="mobile",j.FULLSCREEN="fullscreen",j.SIDEBAR="sidebar",(E=m||(m={})).verified="already_verified",E.failed="verification_failed",(S=_||(_={})).modal="modal",S.top="top",S.bottom="bottom",(w=h||(h={})).blue="blue",w.black="black",w.gray="gray",w.none="none",(T=f||(f={})).primary="PRIMARY",T.hidden="HIDDEN",T.clear="CLEAR",T.secondary="SECONDARY",(I=p||(p={})).physical="physical",I.legal="legal"},31658:function(e){e.exports={wrapper:"input_wrapper__oZuBN",text:"input_text__lX_Ky",input:"input_input___0WuD",btn:"input_btn__xu3Jy",primary:"input_primary___XrLI",header:"input_header__BDn2k",icon:"input_icon__wxWJj",iconCancel:"input_iconCancel__FP7oy",iconCancelForDevices:"input_iconCancelForDevices__r5jAk",focused:"input_focused__xptuC",active:"input_active__wzIyQ",withoutPlaceholder:"input_withoutPlaceholder__IwmuL"}},48008:function(e){e.exports={option:"options_option__bdOBD",wrapper:"options_wrapper__aj27D",mobileStatic:"options_mobileStatic__lfLAb",active:"options_active__FP83A"}},60016:function(e){e.exports={wrapper:"recommendation_wrapper___Kffp",tags:"recommendation_tags__HUxh2",tag:"recommendation_tag__E5h4I",articleTags:"recommendation_articleTags__QKKOK",articleTag:"recommendation_articleTag__XTqB3",date:"recommendation_date__4N7Tm",title:"recommendation_title__kgmaR",recommendation:"recommendation_recommendation__D_qZ7",list:"recommendation_list__hEY9_",article:"recommendation_article__mfV40",image:"recommendation_image__qauBB",articleTitle:"recommendation_articleTitle__0YpQk",articleImage:"recommendation_articleImage__iPlVH"}},65521:function(e){e.exports={main:"search_main__GVdC1",header:"search_header__yZCl5",arrowBack:"search_arrowBack___JXqr",options:"search_options__vxKnV",focused:"search_focused__GmXW2",mobileVisible:"search_mobileVisible__GXUJY"}}}]);